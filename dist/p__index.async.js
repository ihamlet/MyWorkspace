"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[866],{93441:function(b,k,n){n.d(k,{N:function(){return D},P:function(){return A}});var A=[{label:"\u4E00\u822C",value:"Normal",color:"blue"},{label:"\u91CD\u8981",value:"Important",color:"purple"},{label:"\u7D27\u6025",value:"Urgent",color:"red"}],D=[{label:"\u65B0\u521B\u5EFA",value:"New"},{label:"\u5904\u7406\u4E2D",value:"Processing"},{label:"\u5DF2\u5B8C\u6210",value:"Completed"}]},57134:function(b,k,n){n.r(k),n.d(k,{default:function(){return ve}});var A=n(86378),D=n.n(A),w=n(30577),u=n.n(w),g=n(93236),G=n(95978),J=n(21487),K=n(3713),B=n(39591),h=n(61273),S=n(64143),E=n(33666),Q=n(36031),N=n(11120),q=n(75258),_=n(1767),ee=n(62150),V=n(99507),j=n(93441),e=n(62086),te=function(){var f=(0,V.tT)("useCreateTaskModelOpen"),p=f.taskList,O=f.setModelOpen,$=f.setTaskState,H=f.removeTaskItem,x=function(r){var l=Array.from(p).filter(function(a){var t=u()(a,2),o=t[0],s=t[1];return r?s.processStatus===r:a});return l.reverse()},R=(0,g.useState)(x("")),Z=u()(R,2),y=Z[0],P=Z[1];(0,g.useEffect)(function(){return P(x(""))},[p]);var z=(0,g.useState)(""),T=u()(z,2),d=T[0],L=T[1],F=function(r,l){var a=u()(l,2),t=a[0],o=a[1],s="";r.target.checked?s=d==="Processing"?"Completed":"Processing":s=d==="Completed"?"Processing":"",$({key:t,value:D()(D()({},o),{},{processStatus:s})})},M=function(r,l){return d===""?r.processStatus==="Completed"?(0,e.jsx)(G.Z,{icon:(0,e.jsx)(q.Z,{}),color:"success",children:"\u5DF2\u5B8C\u6210"}):(0,e.jsx)(J.Z,{defaultChecked:r.processStatus==="Processing",onChange:function(t){return F(t,l)},children:"\u5904\u7406\u4E2D"}):d==="Processing"||d==="Completed"?(0,e.jsx)(J.Z,{defaultChecked:r.processStatus==="Completed",onChange:function(t){return F(t,l)},children:"\u5DF2\u5B8C\u6210"}):null},U=function(r){var l=r==="New"?"":r;L(l),P(x(l))};return(0,e.jsx)(K.Z,{children:(0,e.jsxs)(B.Z,{children:[(0,e.jsx)(h.Z,{span:24,children:(0,e.jsxs)(S.Z,{size:16,children:[(0,e.jsx)(E.ZP,{type:"primary",icon:(0,e.jsx)(_.Z,{}),onClick:function(){return O(!0)},children:"\u521B\u5EFA\u4EFB\u52A1"}),(0,e.jsx)(Q.Z,{options:j.N,onChange:function(r){return U(r)}})]})}),(0,e.jsx)(h.Z,{span:24,children:(0,e.jsx)(N.ZP,{dataSource:y,renderItem:function(r){var l=u()(r,2),a=l[0],t=l[1],o=j.P.filter(function(c){return t.level===c.value}),s=u()(o,1),i=s[0];return(0,e.jsxs)(N.ZP.Item,{children:[(0,e.jsx)(N.ZP.Item.Meta,{title:(0,e.jsxs)(S.Z,{children:[t.title,(0,e.jsx)(G.Z,{color:i.color,children:i.label})]}),description:t.description}),(0,e.jsxs)(S.Z,{children:[M(t,r),!d&&(0,e.jsx)(E.ZP,{type:"text",size:"small",danger:!0,icon:(0,e.jsx)(ee.Z,{}),onClick:function(){return H(a)},children:"\u5220\u9664"})]})]},a+d)}})})]})})},ne=te,se=n(57042),re=n(27290),ae=n(10765),oe=n(54523),le=n(22762),ue=n(74637),W=n.n(ue),I=se.Z.Text,ie=function(){var f=(0,V.tT)("useCreateTaskModelOpen"),p=f.taskList,O=f.setModelOpen,$=f.getSetSelectDayTaskList,H=f.getIndexddbDataList,x=function(t){var o=Array.from(p).filter(function(s){var i=u()(s,2),c=i[0],v=i[1];return v.level===t&&(v.processStatus==="Processing"||v.processStatus==="Completed")});return o},R=(0,g.useState)("Normal"),Z=u()(R,2),y=Z[0],P=Z[1],z=(0,g.useState)([]),T=u()(z,2),d=T[0],L=T[1];(0,g.useEffect)(function(){return L(x(y))},[p,y]);var F=function(t){var o=j.P.filter(function(c){return c.value===t}),s=u()(o,1),i=s[0];return(0,e.jsxs)(I,{children:["\u60A8\u8FD8\u6CA1\u6709",i.label,"\u7684\u4EFB\u52A1"]})},M=[{children:(0,e.jsxs)(S.Z,{children:[F(y),(0,e.jsx)(E.ZP,{type:"link",onClick:function(){return O(!0)},children:"\u65B0\u5EFA\u4EFB\u52A1"})]})}];d.length&&(M=d.map(function(a){var t=u()(a,2),o=t[0],s=t[1],i=s.processStatus,c=s.description,v=j.P.filter(function(fe){return fe.value===s.level}),C=u()(v,1),Y=C[0];return{color:i==="Completed"?"green":Y.color,children:(0,e.jsxs)(S.Z,{direction:"vertical",children:[(0,e.jsx)(I,{type:"secondary",children:W()(Number(o)).format("YYYY-MM-DD HH:mm:ss")}),(0,e.jsx)(I,{children:c})]})}}));var U=function(t){L(x(t)),P(t)},m=function(t){return $(t.format("YYYY-MM-DD"))},r=function(t,o,s){return o.filter(function(i){var c=u()(i,2),v=c[0],C=c[1],Y=t===W()(Number(v)).format("YYYY-MM-DD");return s?Y&&C.processStatus===s:Y})},l=function(t,o){var s=t.format("YYYY-MM-DD"),i=r(s,o,"Completed").length===r(s,o).length,c=i?"success":"processing",v=r(s,o,"Processing").length,C=r(s,o).length;if(C)return(0,e.jsx)(re.Z,{placement:"rightTop",title:"\u5F53\u5929\u6709".concat(C,"\u6761\u4EFB\u52A1\uFF0C").concat(v?"".concat(v,"\u6761\u4EFB\u52A1\u6B63\u5728\u8FDB\u884C"):"\u90FD\u5DF2\u5B8C\u6210"," "),children:(0,e.jsx)(ae.Z,{status:c})})};return(0,e.jsx)(K.Z,{children:(0,e.jsxs)(B.Z,{gutter:[0,16],children:[(0,e.jsx)(h.Z,{span:24,children:(0,e.jsx)(oe.Z,{dateCellRender:function(t){return l(t,H())},fullscreen:!1,onSelect:m})}),(0,e.jsx)(h.Z,{span:24,children:(0,e.jsx)(Q.Z,{block:!0,options:j.P,onChange:function(t){return U(t)}})}),(0,e.jsx)(h.Z,{span:24,children:(0,e.jsx)(le.Z,{items:M})})]})})},ce=ie,de=function(){return(0,e.jsxs)(B.Z,{className:"page",gutter:[16,16],children:[(0,e.jsx)(h.Z,{xs:24,sm:24,md:14,lg:16,xl:18,children:(0,e.jsx)(ne,{})}),(0,e.jsx)(h.Z,{xs:24,sm:24,md:10,lg:8,xl:6,children:(0,e.jsx)(ce,{})})]})},ve=de}}]);
